---
version: '3'

vars:
  VER: '2.5'
  
tasks:
  gpro:
    desc: 'Run Gemini with the gemini-{{ .VER }}-pro model.'
    cmds:
      - 'gemini -m gemini-{{ .VER }}-pro'
  gflash:
    desc: Run Gemini with the gemini-2.5-flash model.
    cmds:
      - 'gemini -m gemini-{{ .VER }}-flash'
  glite:
    desc: Run Gemini with the gemini-2.5-flash-lite model.
    cmds:
      - 'gemini -m gemini-{{ .VER }}-flash-lite'
  bootstrap:
    desc: Bootstarp
    cmds:
      - python3 -m venv venv
  lint:
    desc: "Lint the code with flake8"
    cmds:
      - flake8 .
  # A task to install all the necessary Python dependencies from requirements.txt.
  deps:
    desc: Install Python dependencies
    cmds:
      - |
        if [ -z "$VIRTUAL_ENV" ]; then
          echo "Error: Virtual environment is not active. Please run 'source venv/bin/activate' first."
          exit 1
        fi
      - pip install -r requirements.txt

  # A task to download the latest player stats.
  download:
    desc: Download NFL player stats for 2023 and 2024 seasons
    cmds:
      - python3 scripts/download_stats.py

  # A task to run the advanced analysis script.
  analyze:
    desc: Run the fantasy football analysis script
    cmds:
      - python3 scripts/analysis.py

  default:
    cmds:
      - task -l
